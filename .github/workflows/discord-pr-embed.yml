on:
  pull_request:
    types: [opened, closed]
  push:
    branches: [main]

jobs:
  discord:
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord Notification
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const webhookUrl = '${{ secrets.DISCORD_WEBHOOK }}';

            if (github.event_name === 'pull_request') {
              const pr = github.event.pull_request;
              const action = github.event.action;

              if (action === 'opened') {
                console.log(`PR created: ${pr.title}`);
                // send Discord embed for new PR
              }

              if (action === 'closed' && pr.merged) {
                console.log(`PR merged: ${pr.title}`);
                // send Discord embed for merged PR
              }
            }

            if (github.event_name === 'push') {
              console.log(`Push to branch: ${github.ref}`);
              // send Discord embed for push / Vercel deploy
            }
